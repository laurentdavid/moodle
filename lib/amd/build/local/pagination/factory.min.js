define("core/local/pagination/factory",["exports","core/templates","core/notification","./paged_content_reactive","jquery","./defaults","./paged_content","./mutations"],(function(_exports,_templates,_notification,_paged_content_reactive,_jquery,_defaults,_paged_content,_mutations){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Paged content factory
   *
   * @module     core/local/pagination/factory
   * @copyright  2023 Laurent David <laurent.david@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.createWithTotalAndLimit=_exports.createWithLimit=void 0,_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery),_paged_content=_interopRequireDefault(_paged_content),_mutations=_interopRequireDefault(_mutations);const createWithTotalAndLimit=(numberOfItems,itemsPerPage,renderPagesContentCallback,config)=>{let templateContext={..._defaults.DEFAULT.DEFAULT_PAGE_CONTEXT};config.hasOwnProperty("controlPlacementBottom")&&(templateContext.controlplacementbottom=config.controlPlacementBottom);var deferred=_jquery.default.Deferred();let id="paged-content-"+Math.floor(1e6*Math.random());config.hasOwnProperty("eventNamespace")&&(id=config.eventNamespace),templateContext.pagecontainerid=id;const reactive=(0,_paged_content_reactive.getPagedContentReactive)(id),defaultLimit=(itemsPerPage||_defaults.DEFAULT.DEFAULT_ITEMS_PER_PAGE).find((item=>item.active)).value;reactive.setInitialState({config:{numberOfItems:numberOfItems,itemsPerPage:itemsPerPage,hasPagingBar:!0,totalPages:0,...config},pages:[{id:1,pageNumber:1,offset:0,limit:defaultLimit,active:!0,content:""}]}),reactive.setMutations(new _mutations.default(renderPagesContentCallback));const observer=new MutationObserver(((mutations,observerInstance)=>{document.getElementById(id)&&(observerInstance.disconnect(),_paged_content.default.init(document.getElementById(id),[]))}));return _templates.default.renderForPromise("core/local/pagination/paged_content",templateContext).then((_ref=>{let{html:html,js:js}=_ref;deferred.resolve(html,js)})).catch(_notification.default.exception),observer.observe(document.body,{childList:!0,subtree:!0}),deferred.promise()};_exports.createWithTotalAndLimit=createWithTotalAndLimit;_exports.createWithLimit=(itemsPerPage,renderPagesContentCallback,config)=>createWithTotalAndLimit(null,itemsPerPage,renderPagesContentCallback,config)}));

//# sourceMappingURL=factory.min.js.map