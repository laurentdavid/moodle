define("core/local/pagination/paging_bar",["exports","core/reactive","./paged_content_reactive","./reactive_events"],(function(_exports,_reactive,_paged_content_reactive,_reactive_events){var obj;
/**
   * A generic single state reactive module for pagination.
   *
   * @module     core/local/pagination/paging_bar
   * @copyright  2023 Laurent David <laurent.david@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_reactive_events=(obj=_reactive_events)&&obj.__esModule?obj:{default:obj};class _default extends _reactive.BaseComponent{create(){this.name="paging-bar",this.selectors={ROOT:"[data-region='paging-control-container']",PREVIOUS_PAGE:"[data-region='page-item'][data-control='previous']",NEXT_PAGE:"[data-region='page-item'][data-control='next']",PAGE_SIZE_SELECTORS:"[data-region='paging-control-limit-container'] .dropdown-menu .dropdown-item"},this.id=this.getElement().id}static init(element,selectors){return new this({element:element,reactive:(0,_paged_content_reactive.getPagedContentReactive)(element.dataset.reactiveId),selectors:selectors})}async stateReady(){this.addEventListener(this.getElement(this.selectors.PREVIOUS_PAGE),"click",this._previousPage),this.addEventListener(this.getElement(this.selectors.NEXT_PAGE),"click",this._nextPage);var elements=this.getElements(this.selectors.PAGE_SIZE_SELECTORS);Array.from(elements).forEach((element=>{this.addEventListener(element,"click",this._changePageSize)}))}getWatchers(){return[{watch:"pages:updated",handler:this._checkLastPage},{watch:"pages:updated",handler:this._checkFirstPage}]}_nextPage(event){event.preventDefault(),this.reactive.dispatch(_reactive_events.default.pageChange,"next")}_previousPage(event){event.preventDefault(),this.reactive.dispatch(_reactive_events.default.pageChange,"previous")}_changePageSize(event){event.preventDefault(),this.reactive.dispatch(_reactive_events.default.changePageSize,Number.parseInt(event.target.dataset.limit))}_checkLastPage(_ref){let{element:element,state:state}=_ref;element.active&&(element.pageNumber===state.config.totalPages?this.getElement(this.selectors.NEXT_PAGE).classList.add("disabled"):this.getElement(this.selectors.NEXT_PAGE).classList.remove("disabled"))}_checkFirstPage(_ref2){let{element:element}=_ref2;element.active&&(1===element.pageNumber?this.getElement(this.selectors.PREVIOUS_PAGE).classList.add("disabled"):this.getElement(this.selectors.PREVIOUS_PAGE).classList.remove("disabled"))}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=paging_bar.min.js.map